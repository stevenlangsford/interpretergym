<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <!-- script load order is important. Exercise setup doesn't ref anything on this page, can go first   -->
  <!-- resource getters refer to global vars (language, difficulty settings), need to follow setup. -->
  <!-- menu scripts ref things on this page, go last-->
  <!-- this is dumb and you should go learn how to do it properly, especially the global-var settings thing -->
  
  <script type="text/javascript" src="mempalace_scripts.js"></script>
  <script type="text/javascript" src="mempalace_tour_scripts.js"></script>
  <script type="text/javascript" src="nback_scripts.js"></script>
  <script src="https://unpkg.com/chinese-numbering@1.x/bundle/iife.js"></script> <!-- external dependency! -->
  <script type="text/javascript" src="infnumbers_scripts.js"></script>
</head>
<body>

  <div id="uberdiv" class="maindiv">

    <div class="bg">
      <img src="resources/liftreading_fem.png" alt="">
    </div>
    
    <div>
      <table class='home_menu'>
      <tr>
      <td><button onClick='mempalace_home()'>Memory Palace</button></td>
      <td></td> <!-- HAHA spot the n00b go learn flexbox or something -->
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><button onClick="mempalace_howtoplay()">How to play</button></td>
      <td><button onClick="mempalace_whytoplay()">Why to play</button></td>
    </tr>
 <tr>
      <td><button onClick='nback_home()'>N-back</button></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><button onclick ='nback_howtoplay()'>How to play</button></td>
      <td><button onclick = 'nback_whytoplay()'>Why to play</button></td>
    </tr>

  <tr>
      <td><button onClick='cloze_home()' disabled >CLoze completions</button></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><button disabled>How to play</button></td>
      <td><button disabled>Why to play</button></td>
    </tr>
   <tr>
      <td><button onClick='translate_home()' disabled >Just translate</button></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><button disabled>How to play</button></td>
      <td><button disabled>Why to play</button></td>
    </tr>
   <tr>
      <td><button onClick='numbers_home()'>Infinite numbers</button></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><button disabled>How to play</button></td>
      <td><button disabled>Why to play</button></td>
    </tr>
   
    </table></div>
    <!--   <p><button onClick='cloze_home()' disabled>Cloze completions</button><button>How to play</button><button>Why to play</button></p> -->
  <!--   <p><button onClick='translate_home()' disabled>Just translate</button><button>How to play</button><button>Why to play</button></p> -->
  <!--   <p><button onClick='numbers_home()' >Infinite numbers</button><button>How to play</button><button>Why to play</button></p> -->
  </div>


  <script type="text/javascript">
    let instruction_index = 0; //another global var used by everything. :-( Kinda nice that it resets whenever main menu reloaded tho.
    //Not sure which is worse, trying to have different games overwrite doc onkeypress or having this giant kludge of global vars
    //Probably the real problem is trying to do everything on one page by overwriting uberdiv, that's the real antipattern here.
    let which_keylistener = "none"
    
    document.onkeypress = function (e) {
	if(which_keylistener=="none"){
	    return
	}

	if(which_keylistener =="numbers"){
	    if(e.keyCode==97){//'a'
		reveal()
	    }else if(e.keyCode==108){//'l'
		draw_numberChallenge()//"next"
	    }
	}
	
	if(which_keylistener =="nback"){
	    if(targ_lang == "blank targlang"){
		//means you haven't started yet
		return
	    }
	    e = e || window.event; //e.keyCode not consistent across browsers? TODO check?
	    if(nback_itemlist.length < current_n + 2){
		//still loading: press the any key to continue
		nback_drawnext()
		return 
	    }
	    if(e.keyCode==97){//'a' key
		nback_respond("same")
	    }else if(e.keyCode==108){//'l' key
		nback_respond("different")
	    }	    
	}
    };

    
  //capture choices made on this page before continuing: (these are the global vars that need to be set for resource getters)
  let targ_lang = "blank targlang"
  let text_type = "blank text type"
  
  function mempalace_submit_settings_start(){
      targ_lang = document.querySelector('input[name="targ_language"]:checked').value;
      text_type = document.querySelector('input[name="text_type"]:checked').value;

      mempalace_startfresh(3);
  }

    //DEV ONLY: skip to current exercise here if you're gonna.
    //    nback_home()
    //    draw_numberChallenge()
    //    nback_home()
 </script>
 
<!-- resource files come last because they can contain getters that reference target language, text type etc, vars must exist -->
<script type="text/javascript" src="resources/concrete_wordlists.js"></script>
<script type="text/javascript" src="resources/my_palace.js"></script>
<script type="text/javascript" src="resources/monologues.js"></script>
<script type="text/javascript" src="resources/common_wordlists.js"></script>

<!-- <script type="text/javascript" src="mainmenu_scripts.js"></script> -->


</body>
</html>
